"use strict";function ownKeys(n,e){var r,t=Object.keys(n);return Object.getOwnPropertySymbols&&(r=Object.getOwnPropertySymbols(n),e&&(r=r.filter(function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})),t.push.apply(t,r)),t}function _objectSpread(n){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?ownKeys(Object(r),!0).forEach(function(e){_defineProperty(n,e,r[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(r)):ownKeys(Object(r)).forEach(function(e){Object.defineProperty(n,e,Object.getOwnPropertyDescriptor(r,e))})}return n}function _defineProperty(e,n,r){return n in e?Object.defineProperty(e,n,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[n]=r,e}function _slicedToArray(e,n){return _arrayWithHoles(e)||_iterableToArrayLimit(e,n)||_unsupportedIterableToArray(e,n)||_nonIterableRest()}function _nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function _unsupportedIterableToArray(e,n){if(e){if("string"==typeof e)return _arrayLikeToArray(e,n);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?_arrayLikeToArray(e,n):void 0}}function _arrayLikeToArray(e,n){(null==n||n>e.length)&&(n=e.length);for(var r=0,t=new Array(n);r<n;r++)t[r]=e[r];return t}function _iterableToArrayLimit(e,n){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e)){var r=[],t=!0,o=!1,i=void 0;try{for(var a,s=e[Symbol.iterator]();!(t=(a=s.next()).done)&&(r.push(a.value),!n||r.length!==n);t=!0);}catch(e){o=!0,i=e}finally{try{t||null==s.return||s.return()}finally{if(o)throw i}}return r}}function _arrayWithHoles(e){if(Array.isArray(e))return e}function asyncGeneratorStep(e,n,r,t,o,i,a){try{var s=e[i](a),u=s.value}catch(e){return void r(e)}s.done?n(u):Promise.resolve(u).then(t,o)}function _asyncToGenerator(s){return function(){var e=this,a=arguments;return new Promise(function(n,r){var t=s.apply(e,a);function o(e){asyncGeneratorStep(t,n,r,o,i,"next",e)}function i(e){asyncGeneratorStep(t,n,r,o,i,"throw",e)}o(void 0)})}}var NETWORK=1,tokenFields="{\n    id\n    name\n    symbol\n    totalSupply\n    derivedETH\n}",factoryFields="{\n  volumeUSD\n  volumeETH\n  untrackedVolumeUSD\n  liquidityUSD\n  liquidityETH\n  txCount\n  tokenCount\n  userCount\n}",pairFields="{\n    id\n    reserveUSD\n    reserveETH\n    volumeUSD\n    untrackedVolumeUSD\n    trackedReserveETH\n    token0 ".concat(tokenFields,"\n    token1 ").concat(tokenFields,"\n    reserve0\n    reserve1\n    token0Price\n    token1Price\n    totalSupply\n    txCount\n    timestamp\n}"),blockFields="{\n    id\n    number\n    timestamp\n}",tokenFullFields="{\n    id\n    symbol\n    name\n    decimals\n    totalSupply\n    volume\n    volumeUSD\n    untrackedVolumeUSD\n    txCount\n    liquidity\n    derivedETH\n    basePairs ".concat(pairFields,"\n    quotePairs ").concat(pairFields,"\n}"),globalFailed=function(e){console.log("Failed!!!",e)},globalSuccess=function(e){console.log("Suucess!!!",e)};function makeGraphQLRequest(e,n){var r=2<arguments.length&&void 0!==arguments[2]?arguments[2]:"post",t=3<arguments.length&&void 0!==arguments[3]?arguments[3]:null,o=4<arguments.length&&void 0!==arguments[4]?arguments[4]:null;$.ajax({url:e,method:r,data:JSON.stringify(n),dataType:"json",success:function(e){e.data?(t||globalSuccess)(e.data):globalFailed()},error:o||globalFailed})}function getPool(e){return _getPool.apply(this,arguments)}function _getPool(){return(_getPool=_asyncToGenerator(regeneratorRuntime.mark(function e(t){var n,o;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=window.variables.URLS||values[NETWORK].URLS,o=n.MASTERCHEF_URL,e.abrupt("return",new Promise(function(n,r){makeGraphQLRequest(o,{query:"\n                query(\n                    $id: ID!\n                    ) {\n                        pools(\n                            id: $id\n                        ) {\n                            id\n                            pair\n                            allocPoint\n                            lastRewardBlock\n                            accSwipePerShare\n                            balance\n                            userCount\n                            owner {\n                                id\n                                swipePerBlock\n                                totalAllocPoint\n                            }\n                            users(orderBy: amount, orderDirection: desc) {\n                                id\n                                address\n                                amount\n                                rewardDebt\n                            }\n                            slpAge\n                            liquidityPair @client\n                            timestamp\n                            entryUSD\n                            exitUSD\n                        }\n                    }\n            ",variables:{id:t}},"post",function(e){return n(e.pools)},function(e){return r(e)})}));case 2:case"end":return e.stop()}},e)}))).apply(this,arguments)}function getPools(){var e=window.variables,o=e.FACTORY_CONTRACT,i=e.ACCOUNT;return Promise.all([call(o.methods.poolLength)()]).then(function(e){for(var n=_slicedToArray(e,1)[0],r=[],t=0;t<n;t+=1)r.push(t);return Promise.all(r.map(function(e){return Promise.all([Promise.resolve(e),call(o.methods.poolInfo)(e),i?call(o.methods.userInfo)(e,i):Promise.resolve({amount:0,rewardDebt:0})])})).then(function(e){return e.map(function(e){var n=_slicedToArray(e,3),r=n[0],t=n[1],o=n[2];return{id:r.toString(),secondaryTokensPerDay:t.secondaryTokensPerDay,lastUpdateTime:t.lastUpdateTime,maxStake:t.maxStake,token:t.token.toLowerCase(),accSecondaryTokenPerShare:t.accSecondaryTokenPerShare,balance:o.amount,rewardDebt:o.rewardDebt}})}).catch(console.log)})}function getLiquidityPositions(){return _getLiquidityPositions.apply(this,arguments)}function _getLiquidityPositions(){return(_getLiquidityPositions=_asyncToGenerator(regeneratorRuntime.mark(function e(){var n,t,o;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(n=window.variables.URLS||values[NETWORK].URLS,t=n.SWIPE_SWAP_URL,o=window.variables.ACCOUNT)return e.abrupt("return",new Promise(function(n,r){makeGraphQLRequest(t,{query:"\n                  query(\n                      $first: Int! = 1000,\n                      $user: Bytes!\n                      ) {\n                          liquidityPositions(first: $first, where: { user: $user }) {\n                              id\n                              liquidityTokenBalance\n                              user {\n                                  id\n                              }\n                              pair {\n                                  id\n                              }\n                          }\n                      }\n              ",variables:{user:o.toLowerCase()}},"post",function(e){return n(e.liquidityPositions)},function(e){return r(e)})}));e.next=6;break;case 6:return e.abrupt("return",new Promise(function(e,n){return e([])}));case 7:case"end":return e.stop()}},e)}))).apply(this,arguments)}function getPairs(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:null,n=(window.variables.URLS||values[NETWORK].URLS).SWIPE_SWAP_URL,t=t||n;return new Promise(function(n,r){makeGraphQLRequest(t,{query:'\n                query(\n                    $first: Int! = 1000\n                    $pairAddresses: [Bytes]!\n                    $orderBy: String! = "trackedReserveETH"\n                    $orderDirection: String! = "desc"\n                ) {\n                    pairs(\n                        first: $first\n                        orderBy: $orderBy\n                        orderDirection: $orderDirection\n                        where: { id_in: $pairAddresses }\n                    ) '.concat(pairFields,"\n                }\n            "),variables:{pairAddresses:e}},"post",function(e){return n(e.pairs)},function(e){return r(e)})})}function getFullPairs(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:0,t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:1e3,o=2<arguments.length&&void 0!==arguments[2]?arguments[2]:null;return o=o||(window.variables.URLS||values[NETWORK].URLS).SWIPE_SWAP_URL,new Promise(function(n,r){makeGraphQLRequest(o,{query:'\n                query(\n                    $first: Int! = 1000\n                    $offset: Int! = 0\n                    $orderBy: String! = "timestamp"\n                    $orderDirection: String! = "desc"\n                ) {\n                    pairs(\n                        first: $first\n                        skip: $offset\n                        orderBy: $orderBy\n                        orderDirection: $orderDirection\n                    ) '.concat(pairFields,"\n                }\n            "),variables:{first:t,offset:e}},"post",function(e){return n(e.pairs)},function(e){return r(e)})})}function getPair(e){var t=(window.variables.URLS||values[NETWORK].URLS).SWIPE_SWAP_URL;return new Promise(function(n,r){makeGraphQLRequest(t,{query:"\n                query(\n                    $id: ID!\n                ) {\n                    pairs(\n                        where: { id: $id }\n                    ) ".concat(pairFields,"\n                }\n            "),variables:{id:e.toLowerCase()}},"post",function(e){return n(e.pairs)},function(e){return r(e)})})}function getAverageBlockTime(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:null,n=dateFns.startOfSecond(dateFns.startOfMinute(dateFns.startOfHour(Date.now()))),t=dateFns.getTime(dateFns.subHours(n,6))/1e3,o=dateFns.getTime(n)/1e3,r=(window.variables.URLS||values[NETWORK].URLS).BLOCK_URL,e=e||r;return new Promise(function(r,n){makeGraphQLRequest(e,{query:"\n                query(\n                    $first: Int! = 1000\n                    $skip: Int! = 0\n                    $start: Int!\n                    $end: Int!\n                ) {\n                    blocks(\n                        first: $first\n                        skip: $skip\n                        orderBy: number\n                        orderDirection: desc\n                        where: { timestamp_gt: $start, timestamp_lt: $end, number_gt: 9300000 }\n                    ) ".concat(blockFields,"\n                }\n            "),variables:{start:t,end:o}},"post",function(e){var o=e.blocks,n=o.reduce(function(e,n,r){var t;return e.timestamp&&(t=e.timestamp-n.timestamp,e.difference=e.difference+t),e.timestamp=n.timestamp,r===o.length-1?e.difference/o.length:e},{timestamp:null,difference:0});return r(n)},function(e){return n(e)})})}function getToken(e){return _getToken.apply(this,arguments)}function _getToken(){return(_getToken=_asyncToGenerator(regeneratorRuntime.mark(function e(t){var o,i,a,n,r,s=arguments;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return o=1<s.length&&void 0!==s[1]?s[1]:null,i={number:5546330},a={number:5546330},n=window.variables.URLS||values[NETWORK].URLS||{},r=n.SWIPE_SWAP_URL,o=o||r,e.abrupt("return",Promise.all([new Promise(function(n,r){makeGraphQLRequest(o,{query:"\n                    query(\n                        $id: String!\n                    ) {\n                        token(\n                            id: $id\n                        ) ".concat(tokenFullFields,"\n                    }\n                "),variables:{id:t.toLowerCase()}},"post",function(e){return n(e.token)},function(e){return r(e)})}),new Promise(function(n,r){makeGraphQLRequest(o,{query:"\n                    query(\n                        $id: String!, $block: Block_height!\n                    ) {\n                        token(\n                            id: $id, block: $block\n                        ) ".concat(tokenFullFields,"\n                    }\n                "),variables:{id:t,block:i}},"post",function(e){return n(e.token)},function(e){return r(e)})}),new Promise(function(n,r){makeGraphQLRequest(o,{query:"\n                    query(\n                        $id: String!, $block: Block_height!\n                    ) {\n                        token(\n                            id: $id, block: $block\n                        ) ".concat(tokenFullFields,"\n                    }\n                "),variables:{id:t,block:a}},"post",function(e){return n(e.token)},function(e){return r(e)})})]).then(function(e){var n=_slicedToArray(e,3),r=n[0],t=n[1],o=n[2];return _objectSpread(_objectSpread({},r),{},{oneDay:{volumeUSD:String(null==t?void 0:t.volumeUSD),derivedETH:String(null==t?void 0:t.derivedETH),liquidity:String(null==t?void 0:t.liquidity),txCount:String(null==t?void 0:t.txCount)},twoDay:{volumeUSD:String(null==o?void 0:o.volumeUSD),derivedETH:String(null==o?void 0:o.derivedETH),liquidity:String(null==o?void 0:o.liquidity),txCount:String(null==o?void 0:o.txCount)}})}).catch(function(e){return{}}));case 6:case"end":return e.stop()}},e)}))).apply(this,arguments)}function getEthPrice(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:null,n=(window.variables.URLS||values[NETWORK].URLS).SWIPE_SWAP_URL,e=e||n;return new Promise(function(n,r){makeGraphQLRequest(e,{query:"\n                query(\n                    $id: Int! = 1\n                ) {\n                    bundles(\n                        id: $id\n                    ) {\n                        id\n                        ethPrice\n                    }\n                }\n            "},"post",function(e){return n(e.bundles)},function(e){return r(e)})})}function getPoolUser(o){var i=window.variables.FACTORY_CONTRACT;return Promise.all([call(i.methods.poolLength)()]).then(function(e){for(var n=_slicedToArray(e,1)[0],r=[],t=0;t<n;t+=1)r.push(t);return Promise.all(r.map(function(e){return Promise.all([Promise.resolve(e),o?call(i.methods.userInfo)(e,o):Promise.resolve({amount:0,rewardDebt:0})])})).then(function(e){return e.map(function(e){var n=_slicedToArray(e,2),r=(n[0],n[1]);return{amount:r.amount,rewardDebt:r.rewardDebt}})}).catch(console.log)})}function getPairTokenContract(e){return web3?new web3.eth.Contract(window.variables.CONTRACT_PAIR_TOKEN_ABI,e):null}function convertFromWei(e){return web3.utils.fromWei(e,"ether")}function convertToWei(e){return web3.utils.toWei(e,"ether")}function getAllowances(n,t){var e=window.variables,o=e.FACTORY_CONTRACT,i=e.PAIR_TOKEN_CONTRACTS;return new Promise(function(r,e){Promise.all(t.map(function(e){return Promise.all([Promise.resolve(e.token),call(i[toChecksumAddress(e.token)].methods.allowance)(n,window.variables.CONTRACT_FACTORY_ADDRESS),call(o.methods.pendingSecondaryToken)(e.id,n),call(i[toChecksumAddress(e.token)].methods.balanceOf)(n)])})).then(function(e){var n=e.reduce(function(e,n){var r=_slicedToArray(n,4),t=r[0],o=r[1],i=r[2],a=r[3];return _objectSpread(_objectSpread({},e),{},_defineProperty({},t,{allowance:Number(web3.utils.fromWei(o,"ether")),reward:Number(web3.utils.fromWei(i,"ether")),balance:web3.utils.fromWei(a,"ether")}))},{});r(n)}).catch(e)})}function getBalance(e,n){window.variables.MASTERCHEF_CONTRACT;return Promise.all([call(n.methods.balanceOf)(e)])}function getBalances(n,t){var o=window.variables.PAIR_TOKEN_CONTRACTS;return new Promise(function(r,e){Promise.all(t.map(function(e){return Promise.all([Promise.resolve(e.id),call(o[e.id].methods.balanceOf)(n)])})).then(function(e){var n=e.reduce(function(e,n){var r=_slicedToArray(n,2),t=r[0],o=r[1];return _objectSpread(_objectSpread({},e),{},_defineProperty({},t,{balance:+web3.utils.fromWei(o,"ether")}))},{});r(n)}).catch(e)})}function getFarmSLPBalance(e){var n=window.variables.CONTRACT_MASTERCHEF_ADDRESS,r=void 0===n?values[1].CONTRACT_MASTERCHEF_ADDRESS:n,t=Object.fromEntries(e.map(function(e){return[e.pair,getPairTokenContract(e.pair)]}));return Promise.all(Object.keys(t).map(function(e){return Promise.all([Promise.resolve(e),web3?call(t[e].methods.balanceOf)(r):Promise.resolve("0")])})).then(function(e){return{balances:e.reduce(function(e,n){var r=_slicedToArray(n,2),t=r[0],o=r[1];return _objectSpread(_objectSpread({},e),{},_defineProperty({},t,{balance:fromWei(new BigNumber(o),18)}))},{}),pairTokenContracts:t}}).catch(console.log)}function getAllowance(e,n){var r=window.variables,t=r.FACTORY_CONTRACT,o=r.PAIR_TOKEN_CONTRACTS;return Promise.all([Promise.resolve(n.token),call(o[toChecksumAddress(n.token)].methods.allowance)(e,window.variables.CONTRACT_FACTORY_ADDRESS),call(t.methods.pendingSecondaryToken)(n.id,e),call(o[toChecksumAddress(n.token)].methods.balanceOf)(e)])}function toChecksumAddress(e){return web3?web3.utils.toChecksumAddress(e):e}function runHarvest(e,r){var n=_slicedToArray(e,2),t=n[0],o=n[1],i=window.variables,a=i.FACTORY_CONTRACT,s=i.ACCOUNT;console.log(t,o),s?send(a.methods.deposit)(t,0,{from:s}).send().on("transactionHash",function(e){services.push({text:"Claim ".concat(o),hash:e})}).on("receipt",function(e){r(e,null),services.update(e)}).on("error",function(e,n){r(null,e),n&&services.update(n)}):r(null,{error:"Choose account!"})}function runApproveStaking(e,n,r){var t=window.variables,o=t.ACCOUNT,i=t.CONTRACT_FACTORY_ADDRESS,a=t.PAIR_TOKEN_CONTRACTS,s=t.farm.LOADDING_APPROVE;o&&!s?(window.variables.farm.LOADDING_APPROVE=1,send(a[toChecksumAddress(e)].methods.approve)(i,new BigNumber(2).pow(256).minus(1).toString(10),{from:o}).send().on("transactionHash",function(e){window.variables.farm.LOADDING_APPROVE=0,services.push({text:"Approve ".concat(n),hash:e})}).on("receipt",function(e){window.variables.farm.LOADDING_APPROVE=0,r(data,null),services.update(e)}).on("error",function(e,n){window.variables.farm.LOADDING_APPROVE=0,r(null,e),n&&services.update(n)})):r(null,{error:"Choose account!"})}function runStake(e,n,r){var t=3<arguments.length&&void 0!==arguments[3]?arguments[3]:"stake",o=4<arguments.length?arguments[4]:void 0;console.log("####------------");var i=window.variables,a=i.FACTORY_CONTRACT,s=i.ACCOUNT;console.log(e,n,r,t),"stake"==t&&s?send(a.methods.deposit)(e,toWei(new BigNumber(n),18).toString(10),{from:s}).send().on("transactionHash",function(e){services.push({text:"Stake ".concat(Number(n).toFixed(6)," ").concat(r),hash:e}),$("#stake_asset .js-confirm-btn").attr("disabled",!0)}).on("receipt",function(e){o(e,null),services.update(e),$("#stake_asset .js-confirm-btn").attr("disabled",!1)}).on("error",function(e,n){o(null,e),n&&services.update(n),$("#stake_asset .js-confirm-btn").attr("disabled",!1)}):"unstake"==t&&s?send(a.methods.withdraw)(e,toWei(new BigNumber(n),18).toString(10),{from:s}).send().on("transactionHash",function(e){services.push({text:"Unstake ".concat(Number(n).toFixed(6)," SLP (").concat(r,")"),hash:e}),$("#stake_asset .js-confirm-btn").attr("disabled",!0)}).on("receipt",function(e){o(data,null),services.update(e),$("#stake_asset .js-confirm-btn").attr("disabled",!1)}).on("error",function(e,n){o(null,e),n&&services.update(n),$("#stake_asset .js-confirm-btn").attr("disabled",!1)}):o(null,{error:"Choose account!"})}function getQuote(e,n,r){var t=window.variables.ROUTER_CONTRACT;return e?call(t.methods.quote)(toWei(new BigNumber(e)).toString(10),toWei(new BigNumber(n)).toString(10),toWei(new BigNumber(r)).toString(10)).then(function(e){return fromWei(new BigNumber(e.toString()))}).catch(function(e){return null}):Promise.resolve(null)}var formatNumber=function(e,n,r,t,o){var i=1<arguments.length&&void 0!==n?n:2,a=2<arguments.length&&void 0!==r?r:"en",s=3<arguments.length&&void 0!==t?t:null,u=4<arguments.length&&void 0!==o?o:null,l=new BigNumber(e).toFixed(i);return e=s&&u?new Intl.NumberFormat(a,{style:s,currency:u}).format(l):s?new Intl.NumberFormat(a,{style:s}).format(l):new Intl.NumberFormat(a).format(l)};