"use strict";function _slicedToArray(o,e){return _arrayWithHoles(o)||_iterableToArrayLimit(o,e)||_unsupportedIterableToArray(o,e)||_nonIterableRest()}function _nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function _iterableToArrayLimit(o,e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(o)){var t=[],n=!0,r=!1,a=void 0;try{for(var i,l=o[Symbol.iterator]();!(n=(i=l.next()).done)&&(t.push(i.value),!e||t.length!==e);n=!0);}catch(o){r=!0,a=o}finally{try{n||null==l.return||l.return()}finally{if(r)throw a}}return t}}function _arrayWithHoles(o){if(Array.isArray(o))return o}function _toConsumableArray(o){return _arrayWithoutHoles(o)||_iterableToArray(o)||_unsupportedIterableToArray(o)||_nonIterableSpread()}function _nonIterableSpread(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function _unsupportedIterableToArray(o,e){if(o){if("string"==typeof o)return _arrayLikeToArray(o,e);var t=Object.prototype.toString.call(o).slice(8,-1);return"Object"===t&&o.constructor&&(t=o.constructor.name),"Map"===t||"Set"===t?Array.from(o):"Arguments"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t)?_arrayLikeToArray(o,e):void 0}}function _iterableToArray(o){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(o))return Array.from(o)}function _arrayWithoutHoles(o){if(Array.isArray(o))return _arrayLikeToArray(o)}function _arrayLikeToArray(o,e){(null==e||e>o.length)&&(e=o.length);for(var t=0,n=new Array(e);t<e;t++)n[t]=o[t];return n}function ownKeys(e,o){var t,n=Object.keys(e);return Object.getOwnPropertySymbols&&(t=Object.getOwnPropertySymbols(e),o&&(t=t.filter(function(o){return Object.getOwnPropertyDescriptor(e,o).enumerable})),n.push.apply(n,t)),n}function _objectSpread(e){for(var o=1;o<arguments.length;o++){var t=null!=arguments[o]?arguments[o]:{};o%2?ownKeys(Object(t),!0).forEach(function(o){_defineProperty(e,o,t[o])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):ownKeys(Object(t)).forEach(function(o){Object.defineProperty(e,o,Object.getOwnPropertyDescriptor(t,o))})}return e}function _defineProperty(o,e,t){return e in o?Object.defineProperty(o,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):o[e]=t,o}var countingTo=0;function resetPools(){console.log("Run reset pools"),window.variables.PAIR_TOKEN_CONTRACTS={},window.variables.pool={},window.variables.pool.PAIRS=[],initPool()}function initPool(){initData(function(o,e){var t=window.variables,n=t.PAIR_TOKEN_CONTRACTS,r=void 0===n?{}:n,a=t.pool.PAIRS,i=void 0===a?[]:a;window.variables.PAIR_TOKEN_CONTRACTS=_objectSpread(_objectSpread({},r),e),window.variables.pool.PAIRS=[].concat(_toConsumableArray(i),_toConsumableArray(o)),window.variables.ACCOUNT&&(updatePool(),countingTo=0)})}function updatePool(){var o=window.variables.ACCOUNT;window.variables.pool.PAIRS&&o?initUserData(function(o){renderPools(window.variables.pool.PAIRS,o)}):renderPools([],[])}function initData(n){var o=window.variables.pool.PAIRS,e=void 0===o?[]:o;Promise.all([getFullPairs(e.length)]).then(function(o){var e=_slicedToArray(o,1)[0],t=Object.fromEntries(e.map(function(o){return[o.id,getPairTokenContract(o.id)]}));n(e,t)}).catch(console.log)}function initUserData(t){var o=window.variables,e=o.ACCOUNT,n=o.pool.PAIRS;Promise.all([e&&n?getBalances(e,n):Promise.resolve([])]).then(function(o){var e=_slicedToArray(o,1)[0];window.variables.pool.BALANCES=e,t(e)}).catch(console.log)}function renderPools(o,m){var w;0<o.length?(w=0,o.forEach(function(e){var o,t,n,r,a,i,l,c,d,s,u=m[e.id].balance,p=e.token0,b=e.token1,v=e.reserve0,y=e.reserve1,f=e.totalSupply;0<new BigNumber(u).toNumber()&&(r=(null===(o=(n=window.variables.TOKEN_LIST[window.variables.NETWORK]).find(function(o){return o.address.toLowerCase()===e.token0.id.toLowerCase()}))||void 0===o?void 0:o.logoURI)||"images/defaultAsset.svg",a=(null===(t=n.find(function(o){return o.address.toLowerCase()===e.token1.id.toLowerCase()}))||void 0===t?void 0:t.logoURI)||"images/defaultAsset.svg",i=u/f,l=new BigNumber(100*i).toFormat(2),c=new BigNumber(v*i).toFormat(8),d=new BigNumber(y*i).toFormat(8),s=$(".pool__descr").find("#".concat(e.id)),0==$(".pool__descr").find("div").length&&$(".pool__descr").empty(),s.length?(s.find("pool-accordion--body-text-item-value.balance").text(u),s.find("pool-accordion--body-text-item-value.pool-share-percent").text("".concat(l,"%")),s.find("pool-accordion--body-text-item-value.pooled-token0 span").text("".concat(c,"%")),s.find("pool-accordion--body-text-item-value.pooled-token1 span").text("".concat(d,"%"))):$(".pool__descr").append('\n            <div id="'.concat(e.id,'" class="pool-accordion"> \n              <div class="pool-accordion--title"> \n                <div class="pool-accordion--title-pair-info">\n                  <div class="pool-accordion--title-pair-info-images">\n                    <img src="').concat(r,'">\n                    <img src="').concat(a,'">\n                  </div>\n                  <div class="pool-accordion--title-pair-info-text">').concat(p.symbol," / ").concat(b.symbol,'</div>\n                </div>\n                <div class="pool-accordion--title-button">\n                  <button class="pool-accordion-expander closed" data-id="').concat(p.symbol,"-").concat(b.symbol,'">\n                    Manage\n                    <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" style="margin-left: 10px;">\n                      <polyline points="6 9 12 15 18 9"></polyline>\n                    </svg>\n                  </button>\n                </div>\n              </div>\n              <div class="pool-accordion--body" id="').concat(p.symbol,"-").concat(b.symbol,'" style="display:none;"> \n                <div class="pool-accordion--body-text-item"> \n                  <div class="pool-accordion--body-text-item-descr">Your total pool tokens:</div>\n                  <div class="pool-accordion--body-text-item-value balance">').concat(u,'</div>\n                </div>\n                <div class="pool-accordion--body-text-item"> \n                  <div class="pool-accordion--body-text-item-descr">Pooled ').concat(p.symbol,':</div>\n                  <div class="pool-accordion--body-text-item-value pooled-token0">\n                    <span>').concat(c,'</span>\n                    <img src="').concat(r,'">\n                  </div>\n                </div>\n                <div class="pool-accordion--body-text-item"> \n                  <div class="pool-accordion--body-text-item-descr">Pooled ').concat(b.symbol,':</div>\n                  <div class="pool-accordion--body-text-item-value pooled-token1">\n                    <span>').concat(d,'</span>\n                    <img src="').concat(a,'">\n                  </div>\n                </div>\n                <div class="pool-accordion--body-text-item"> \n                  <div class="pool-accordion--body-text-item-descr">Your pool share:</div>\n                  <div class="pool-accordion--body-text-item-value pool-share-percent">').concat(l,'%</div>\n                </div>\n                <a href="https://info.swipe.org/pairs/').concat(e.id,'" target="_blink" class="pool-accordion--body-link-item">\n                  View accrued fees and analytics\n                  <span style="font-size: 11px;">â†—</span>\n                </a>\n                <div class="pool-accordion--body-button-item">\n                  <a class="btn" href="add-liquidity?type=add&inputCurrency=').concat(p.id,"&outputCurrency=").concat(b.id,'">Add</a>\n                  <a class="btn" href="remove-liquidity?token0=').concat(p.id,"&token1=").concat(b.id,'">Remove</a>\n                </div>\n              </div>\n            </div>\n          ')),w++)}),w||$(".pool__descr").text("You don't have any liquidity pools")):$(".pool__descr").text("Connect a wallet to view your liquidity.")}window.variables.INIT={},window.onload=function(){$("#width").on("change",function(o){$(".stake-embed").width(o.target.value)}),$("#height").on("change",function(o){$(".stake-embed").height(o.target.value)}),$("#reload-frame").on("click",function(){var o=$("input[name='token']:checked").val(),e=$("#bg-color").val(),t=$("#text-color").val(),n=$("#btn-color").val();o&&(window.variables.INIT.token=o),e&&(window.variables.INIT.bgColor=e),t&&(window.variables.INIT.textColor=t),n&&(window.variables.INIT.btnColor=n),initFarm()})};